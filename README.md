# การควบคุมมอเตอร์ด้วย Bluetooth โดยใช้จอยคอนโทรลเลอร์ Xbox

โปรเจคนี้ใช้ในการควบคุมมอเตอร์โดยใช้ไลบรารี **Bluepad32** ร่วมกับจอยคอนโทรลเลอร์สไตล์ Xbox ที่รองรับการเชื่อมต่อ Bluetooth ซึ่งสามารถควบคุมการเคลื่อนที่ของมอเตอร์ เช่น เดินหน้า ถอยหลัง เลี้ยวซ้าย ขวา และหมุนในทิศทางต่าง ๆ รวมถึงการปรับความเร็วของมอเตอร์ได้ด้วยการใช้ปุ่มบนจอยคอนโทรลเลอร์

## ความต้องการ

- ไลบรารี **Bluepad32** สำหรับการเชื่อมต่อจอยคอนโทรลเลอร์ Bluetooth
- บอร์ด **ESP32**
- โมดูลควบคุมมอเตอร์ เช่น **TB6612FNG** หรือโมดูลที่คล้ายกัน
- จอยคอนโทรลเลอร์ Bluetooth (เช่น จอย Xbox)

## การติดตั้ง

1. **ติดตั้งไลบรารี Bluepad32**:
   - เปิด Arduino IDE แล้วไปที่ `Sketch` -> `Include Library` -> `Manage Libraries...`
   - ค้นหา "Bluepad32" และติดตั้งเวอร์ชันล่าสุด

2. **ตั้งค่าการเชื่อมต่อของโมดูลควบคุมมอเตอร์และบอร์ด ESP32**:
   - เชื่อมต่อโมดูลควบคุมมอเตอร์กับพินตามที่ระบุในไฟล์โค้ด
   - เชื่อมต่อมอเตอร์กับโมดูลควบคุมมอเตอร์
   - เชื่อมต่อบอร์ด ESP32 กับคอมพิวเตอร์ผ่าน USB

3. **อัพโหลดโค้ด**:
   - เลือกบอร์ด ESP32 และพอร์ตที่เชื่อมต่อใน Arduino IDE (`Tools` -> `Board` -> เลือกบอร์ด ESP32 ของคุณ)
   - อัพโหลดโค้ดไปยังบอร์ด ESP32

## การใช้งาน

### การควบคุมความเร็ว
- ใช้ปุ่ม **LB** เพื่อเพิ่มความเร็ว (สูงสุด 5 ระดับ)
- ใช้ปุ่ม **RB** เพื่อลดความเร็ว

### การควบคุมการเคลื่อนที่
- **D-Pad ขึ้น**: เคลื่อนที่ไปข้างหน้า
- **D-Pad ลง**: เคลื่อนที่ถอยหลัง
- **D-Pad ซ้าย**: เลี้ยวซ้าย
- **D-Pad ขวา**: เลี้ยวขวา
- **Diagonal ขึ้นขวา**: เคลื่อนที่ไปทางทแยงขวาขึ้น
- **Diagonal ขึ้นซ้าย**: เคลื่อนที่ไปทางทแยงซ้ายขึ้น
- **Diagonal ลงขวา**: เคลื่อนที่ไปทางทแยงขวาลง
- **Diagonal ลงซ้าย**: เคลื่อนที่ไปทางทแยงซ้ายลง
- **ปุ่ม A**: หมุนไปทางขวา (การเคลื่อนที่แบบโค้ง)
- **ปุ่ม B**: หมุนไปทางซ้าย (การเคลื่อนที่แบบโค้ง)
- **ปุ่ม X**: เคลื่อนที่ทางด้านซ้าย
- **ปุ่ม Y**: เคลื่อนที่ทางด้านขวา

### การหยุด
- มอเตอร์จะหยุดเมื่อไม่มีการกดปุ่มใด ๆ

## การทำงานของโปรแกรม

โค้ดจะอ่านข้อมูลจากจอยคอนโทรลเลอร์ผ่าน Bluetooth โดยใช้ไลบรารี Bluepad32 แล้วทำการจับคู่กับคำสั่งต่าง ๆ ที่ใช้ควบคุมการเคลื่อนที่และการปรับความเร็วของมอเตอร์

## การเชื่อมต่อ ESP32 กับ TB6612FNG 2 ตัว

### การเชื่อมต่อพิน:

| **พิน ESP32** | **พิน TB6612FNG** | **ฟังก์ชัน**                         |
|---------------|-------------------|---------------------------------------|
| Pin 32        | STBY              | เปิด/ปิดการทำงานของ TB6612FNG       |
| Pin 27        | PWMA              | ควบคุมความเร็วมอเตอร์ด้านซ้ายหน้า  |
| Pin 26        | PWMB              | ควบคุมความเร็วมอเตอร์ด้านขวาหน้า  |
| Pin 25        | PWMA              | ควบคุมความเร็วมอเตอร์ด้านซ้ายหลัง  |
| Pin 33        | PWMB              | ควบคุมความเร็วมอเตอร์ด้านขวาหลัง  |
| Pin 12        | IN1_FL             | ควบคุมทิศทางมอเตอร์ด้านซ้ายหน้า  |
| Pin 14        | IN2_FL             | ควบคุมทิศทางมอเตอร์ด้านซ้ายหน้า  |
| Pin 4         | IN1_FR             | ควบคุมทิศทางมอเตอร์ด้านขวาหน้า  |
| Pin 16        | IN2_FR             | ควบคุมทิศทางมอเตอร์ด้านขวาหน้า  |
| Pin 18        | IN1_RL             | ควบคุมทิศทางมอเตอร์ด้านซ้ายหลัง  |
| Pin 19        | IN2_RL             | ควบคุมทิศทางมอเตอร์ด้านซ้ายหลัง  |
| Pin 5         | IN1_RR             | ควบคุมทิศทางมอเตอร์ด้านขวาหลัง  |
| Pin 17        | IN2_RR             | ควบคุมทิศทางมอเตอร์ด้านขวาหลัง  |

## รายการอุปกรณ์

- **ESP32_38U** x1
- **TB6612FNG** x2 (โมดูลควบคุมมอเตอร์)
- **Multipurpose PCB** x1 (แผ่นวงจรสำหรับต่ออุปกรณ์ต่าง ๆ)
- **Mecanum Wheel Robotics Base Kit** x1 (ชุดฐานหุ่นยนต์ที่ใช้ล้อเมคานัม)
- **18650 Battery ABS Socket (4 Slot)** x1 (ซ็อกเก็ตแบตเตอรี่ 18650 สำหรับใส่ 4 ก้อน)
- **18650 Battery 3.7V** x4 (แบตเตอรี่ลิเธียม 18650 ขนาด 3.7V)
- **Self-Reset Square Push Button Switch** x1 (สวิตช์กดแบบสี่เหลี่ยมที่รีเซ็ตตัวเอง)
- **40 Pin 1X40 Single Row Male and Female** x1 ชุด (ขาเชื่อมต่อ Male และ Female 1 ชุด)
- **Terminal 2 Pin** x5 (ขั้วต่อ 2 พิน)
- **อุปกรณ์บัดกรี และสายไฟ** (สำหรับการเชื่อมต่อและบัดกรีวงจร)

## ลิขสิทธิ์

โปรเจคนี้ได้รับอนุญาตภายใต้ลิขสิทธิ์ MIT - ดูรายละเอียดในไฟล์ [LICENSE](LICENSE)
